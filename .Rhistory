from = "refseq_hs_2013_07.fasta"
to = "refseq_hs_2013_07.fasta"
dir.create(file.path(fasta_dir), recursive = TRUE, showWarnings = FALSE)
filepath <- system.file("extdata", from, package = "proteoQDA")
filepath
con <- gzfile(path.expand(filepath))
suppressWarnings(df <- readLines(con))
head(df)
df[1]
df[2]
from
filepath
library(proteoQDA)
fasta_dir = "~\\proteoQ\\dbs\\fasta\\refseq"
from = "refseq_hs_2013_07.fasta"
"refseq_hs_2013_07.fasta"
filepath <- system.file("extdata", from, package = "proteoQDA")
filepath
from = "refseq_hs_2013_07.zip"
filepath <- file.path("C:\\Results\\R\\proteoQDA\\inst\\extdata", from)
filepath
con <- gzfile(path.expand(filepath))
suppressWarnings(df <- readLines(con))
df[2]
df[1]
df[3]
from = "refseq_hs_2013_07.fasta"
filepath <- file.path("C:\\Results\\R\\proteoQDA\\inst\\extdata", from)
suppressWarnings(df <- readLines(filepath))
df[1]
df[2]
df[3]
new_from <- gsub("\\.fasta", ".zip", from)
new_from <- gsub("\\.fasta", ".zip", from)
nw_filepath <- file.path("C:\\Results\\R\\proteoQDA\\inst\\extdata", new_from)
new_filepath <- file.path("C:\\Results\\R\\proteoQDA\\inst\\extdata", new_from)
new_filepath
con <- gzfile(path.expand(new_filepath))
?gzfile
from = "refseq_hs_2013_07.fasta"
to = "refseq_hs_2013_07.fasta"
filepath <- file.path("C:\\Results\\R\\proteoQDA\\inst\\extdata", from)
filepath
suppressWarnings(df <- readLines(filepath))
df[10]
df[11]
save(refseq_hs_2013_07, file = file.path("C:\\Results\\R\\proteoQDA\\inst\\extdata", "refseq_hs_2013_07.rda"))
nm <- gsub("\\.fasta", "", from)
assign(nm, readLines(filepath))
suppressWarnings(assign(nm, readLines(filepath)))
rm(refseq_hs_2013_07)
suppressWarnings(assign(nm, readLines(filepath)))
nm
save(list = nm, file = file.path("C:\\Results\\R\\proteoQDA\\inst\\extdata", paste0(nm, ".rda")))
save(list = nm, file = file.path("C:\\Results\\R\\proteoQDA\\inst\\extdata", paste0(nm, ".rda")), compress = "xz")
foo_fasta_rda <- function(db_path = "~\\proteoQ\dbs\\fasta\\refseq", from = "refseq_hs_2013_07.fasta") {
filepath <- file.path(db_path, from)
nm <- gsub("\\.fasta", "", from)
suppressWarnings(assign(nm, readLines(filepath)))
save(list = nm, file = file.path(db_path, paste0(nm, ".rda")), compress = "xz")
}
foo_fasta_rda <- function(db_path = "~\\proteoQ\dbs\\fasta\\refseq", from = "refseq_hs_2013_07.fasta") {
filepath <- file.path(db_path, from)
nm <- gsub("\\.fasta", "", from)
suppressWarnings(assign(nm, readLines(filepath)))
save(list = nm, file = file.path(db_path, paste0(nm, ".rda")), compress = "xz")
}
?prepGO
library(proteoQ)
?prepGO
foo_fasta_rda <- function(db_path = "~\\proteoQ\dbs\\fasta\\refseq", from = "refseq_hs_2013_07.fasta") {
filepath <- file.path(db_path, from)
nm <- gsub("\\.fasta", "", from)
# suppressWarnings(assign(nm, readLines(filepath)))
# save(list = nm, file = file.path(db_path, paste0(nm, ".rda")), compress = "xz")
}
foo_fasta_rda <- function(db_path = "~\\proteoQ\dbs\\fasta\\refseq", from = "refseq_hs_2013_07.fasta") {
# filepath <- file.path(db_path, from)
# nm <- gsub("\\.fasta", "", from)
# suppressWarnings(assign(nm, readLines(filepath)))
# save(list = nm, file = file.path(db_path, paste0(nm, ".rda")), compress = "xz")
}
foo_fasta_rda <- function(db_path = "~\\proteoQ\dbs\\fasta\\refseq", from = "refseq_hs_2013_07.fasta") {
# filepath <- file.path(db_path, from)
# nm <- gsub("\\.fasta", "", from)
# suppressWarnings(assign(nm, readLines(filepath)))
# save(list = nm, file = file.path(db_path, paste0(nm, ".rda")), compress = "xz")
}
foo_fasta_rda <- function() {
}
foo_fasta_rda <- function(db_path = "~\\proteoQ\dbs\\fasta\\refseq") {
}
foo_fasta_rda <- function(db_path = "~\\proteoQ\\dbs\\go", ) {
}
foo_fasta_rda <- function(db_path = "~\\proteoQ\\dbs\\go") {
}
foo_fasta_rda <- function(db_path = "~\\proteoQ\\dbs\\fasta\\refseq") {
}
foo_fasta_rda <- function(db_path = "~\\proteoQ\\dbs\\fasta\\refseq", from = "refseq_hs_2013_07.fasta") {
filepath <- file.path(db_path, from)
nm <- gsub("\\.fasta", "", from)
suppressWarnings(assign(nm, readLines(filepath)))
save(list = nm, file = file.path(db_path, paste0(nm, ".rda")), compress = "xz")
}
foo_fasta_rda()
load(file = file.path(~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07))
load(file = file.path("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07"))
load(file = file.path("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.rda"))
write.fasta(sequences = refseq_hs_2013_07, names = seqinr::getAnnot(refseq_hs_2013_07), nbchar = 80,
file.out = file.path(db_path, "temp.fasta"))
seqinr::write.fasta(sequences = refseq_hs_2013_07, names = seqinr::getAnnot(refseq_hs_2013_07), nbchar = 80,
file.out = file.path(db_path, "temp.fasta"))
db_path = "~\\proteoQ\\dbs\\fasta\\refseq"
seqinr::write.fasta(sequences = refseq_hs_2013_07, names = seqinr::getAnnot(refseq_hs_2013_07), nbchar = 80,
file.out = file.path(db_path, "temp.fasta"))
writeLines(refseq_hs_2013_07, "test.fasta")
write(refseq_hs_2013_07, "test.fasta")
write(refseq_hs_2013_07, file.path(db_path, "test.fasta"))
write(refseq_hs_2013_07, file.path(db_path, "refseq_hs_2013_07.fasta"))
temp = seqinr::read.fasta(file.path(db_path, "refseq_hs_2013_07.fasta"), seqtype = "AA", as.string = TRUE, set.attributes = TRUE)
temp[1]
foo_fasta_rda <- function(db_path = "~\\proteoQ\\dbs\\fasta\\refseq", from = "refseq_hs_2013_07.fasta") {
filepath <- file.path(db_path, from)
nm <- gsub("\\.fasta", "", from)
suppressWarnings(assign(nm, readLines(filepath)))
save(list = nm, file = file.path(db_path, paste0(nm, ".rda")), compress = "xz")
}
foo_fasta_rda("~\\proteoQ\\dbs\\fasta\\uniprot", "uniprot_hs_2014_07.fasta")
foo_fasta_rda("~\\proteoQ\\dbs\\fasta\\uniprot", "uniprot_mm_2014_07.fasta")
install.packages("rlang")
library(devtools)
document("C:\\Results\\R\\proteoQ")
install("C:\\Results\\R\\proteoQ")
install("C:\\Results\\R\\proteoQ")
devtools::install("C:\\Results\\R\\proteoQ")
devtools::install("C:\\Results\\R\\proteoQDA")
?load_expts
library(org.Hs.eg.db)
library(org.Mm.eg.db)
library(proteoQDA)
fasta_dir <- "~\\proteoQ\\dbs\\fasta\\refseq"
dir.create(fasta_dir, recursive = TRUE, showWarnings = FALSE)
copy_refseq_hs(fasta_dir)
copy_refseq_mm(fasta_dir)
dat_dir <- "~\\proteoQ\\custom_refseq_lookups"
copy_global_mascot(dat_dir)
copy_global_exptsmry(dat_dir)
copy_global_fracsmry(dat_dir)
Ref2Entrez(species = human)
Ref2Entrez(species = mouse)
?Ref2Entrez
library(proteoQ)
load_expts()
Ref2Entrez(species = human)
library(org.Hs.eg.db)
library(org.Mm.eg.db)
# just as in `?load_expts`,
# set up Fasta, PSM and metadata if not yet
library(proteoQDA)
fasta_dir <- "~\\proteoQ\\dbs\\fasta\\refseq"
dir.create(fasta_dir, recursive = TRUE, showWarnings = FALSE)
copy_refseq_hs(fasta_dir)
copy_refseq_mm(fasta_dir)
dat_dir <- "~\\proteoQ\\custom_refseq_lookups"
copy_global_mascot(dat_dir)
copy_global_exptsmry(dat_dir)
copy_global_fracsmry(dat_dir)
library(proteoQ)
load_expts()
# RefSeq to Entrez lookups
Ref2Entrez(species = human)
Ref2Entrez(species = mouse)
library(org.Hs.eg.db)
library(org.Mm.eg.db)
# set up Fasta, PSM and metadata if not yet
library(proteoQDA)
fasta_dir <- "~\\proteoQ\\dbs\\fasta\\refseq"
# dir.create(fasta_dir, recursive = TRUE, showWarnings = FALSE)
copy_refseq_hs(fasta_dir)
copy_refseq_mm(fasta_dir)
dat_dir <- "~\\proteoQ\\custom_refseq_lookups"
copy_global_mascot(dat_dir)
copy_global_exptsmry(dat_dir)
copy_global_fracsmry(dat_dir)
library(proteoQ)
load_expts(dat_dir)
# prepare RefSeq to Entrez lookups
Ref2Entrez(species = human)
Ref2Entrez(species = mouse)
# prepare RefSeq to Entrez lookups
Ref2Entrez(species = human, overwrite = TRUE)
Ref2Entrez(species = mouse, overwrite = TRUE)
readRDS(file.path("~\\proteoQ\\dbs\\entrez\\refseq_entrez_hs.rds")) %>% head()
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\refseq\\refseq_hs_2013_07.fasta",
"~\\proteoQ\\dbs\\fasta\\refseq\\refseq_mm_2013_07.fasta"),
entrez = c("~\\proteoQ\\dbs\\entrez\\refseq_entrez_hs.rds",
"~\\proteoQ\\dbs\\entrez\\refseq_entrez_mm.rds"),
)
library(proteoQ)
load_expts(dat_dir)
library(proteoQDA)
fasta_dir <- "~\\proteoQ\\dbs\\fasta\\uniprot"
copy_uniprot_hs(fasta_dir)
copy_uniprot_mm(fasta_dir)
dat_dir <- "~\\proteoQ\\custom_uniprot_lookups"
copy_global_maxquant(dat_dir)
copy_global_exptsmry(dat_dir)
copy_global_fracsmry(dat_dir)
simulUniprotPSM(MaxQuant)
devtools::document("C:\\Results\\R\\proteoQDA")
devtools::load_all("C:\\Results\\R\\proteoQDA")
simulUniprotPSM(MaxQuant)
devtools::document("C:\\Results\\R\\proteoQDA")
devtools::load_all("C:\\Results\\R\\proteoQDA")
simulUniprotPSM(MaxQuant)
devtools::document("C:\\Results\\R\\proteoQDA")
devtools::load_all("C:\\Results\\R\\proteoQDA")
simulUniprotPSM(MaxQuant)
devtools::load_all("C:\\Results\\R\\proteoQDA")
devtools::document("C:\\Results\\R\\proteoQDA")
library(proteoQ)
load_expts()
# convert RefSeq PSMs to simulated UniProt PSMs
simulUniprotPSM(MaxQuant)
# UniProt to Entrez lookups
Uni2Entrez(species = human)
Uni2Entrez(species = mouse)
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_hs_2014_07.fasta",
"~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_mm_2014_07.fasta"),
entrez = c("~\\proteoQ\\dbs\\entrez\\uniprot_entrez_hs.rds",
"~\\proteoQ\\dbs\\entrez\\uniprot_entrez_mm.rds"),
)
if (!requireNamespace(c("org.Hs.eg.db", "org.Mm.eg.db"), quietly = TRUE))
install.packages(c("org.Hs.eg.db", "org.Mm.eg.db"))
if (!requireNamespace(c("org.Hs.eg.db", "org.Mm.eg.db"), quietly = TRUE))
install.packages(c("org.Hs.eg.db", "org.Mm.eg.db"))
if (!requireNamespace(c("org.Hs.eg.db", "org.Mm.eg.db"), quietly = TRUE))
BiocManager::install(c("org.Hs.eg.db", "org.Mm.eg.db"))
requireNamespace(c("org.Hs.eg.db", "org.Mm.eg.db")
)
requireNamespace(c("org.Hs.eg.db", "org.Mm.eg.db"), quietly = TRUE)
temp = requireNamespace(c("org.Hs.eg.db", "org.Mm.eg.db"), quietly = TRUE)
temp
requireNamespace(c("org.Hs.eg.db", "org.Mm.eg.db", "org.Bt.eg.db"), quietly = TRUE)
temp = requireNamespace(c("org.Hs.eg.db", "org.Mm.eg.db", "org.Bt.eg.db"), quietly = TRUE)
temp
temp = requireNamespace("org.Bt.eg.db", quietly = TRUE)
temp
library(proteoQ)
dat_dir <- "~\\proteoQ\\custom_refseq_lookups"
load_expts()
Ref2Entrez(species = human)
Ref2Entrez(species = mouse)
Ref2Entrez(species = mouse, overwrite = TRUE)
readRDS(file.path("~\\proteoQ\\dbs\\entrez\\refseq_entrez_hs.rds")) %>% head()
head(readRDS(file.path("~\\proteoQ\\dbs\\entrez\\refseq_entrez_hs.rds")))
head(readRDS(file.path("~\\proteoQ\\dbs\\entrez\\refseq_entrez_mm.rds")))
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
dat_dir <- "C:\\Results\\Limbrick\\020"
load_expts(dat_dir)
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_hs_2014_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
View(df)
View(df)
head(df)
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_hs_2014_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
df <- df %>%
dplyr::mutate(prot_acc_orig = prot_acc) %>%
dplyr::mutate(prot_acc = gsub("[1-9]{1}::", "", prot_acc))
View(df)
temp <- df %>% annotPrn(fasta, entrez)
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_hs_2014_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
View(acc_lookup)
fasta["1433G_HUMAN"]
View(acc_lookup)
View(genes)
View(acc_lookup)
View(uniprot_entrez_hs)
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_hs_2014_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
filelist
entrez <- purrr::map(filelist, ~ get(.x))
entrez <- purrr::map(filelist, ~ get(.x)) %>%
dplyr::bind_rows()
acc_type
View(entrez)
.x
entrez <- purrr::map(filelist, ~ get(.x)) %>%
dplyr::bind_rows() %>%
dplyr::filter(!duplicated(.[[entrez_key]])) %>%
dplyr::mutate(!!entrez_key := as.character(!!rlang::sym(entrez_key)))
View(entrez)
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_hs_2014_07.fasta"),
entrez = c("~\\proteoQ\\dbs\\entrez\\uniprot_entrez_hs.rda"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_hs_2014_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_hs_2014_07.fasta"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_hs_2014_07.fasta"),
entrez = c("~\\proteoQ\\dbs\\entrez\\uniprot_entrez_hs.rda"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
devtools::document(pkg  = "C:\\Results\\R\\proteoq")
normPSM(
group_psm_by = pep_seq_mod,
group_pep_by = gene,
fasta = c("~\\proteoQ\\dbs\\fasta\\uniprot\\uniprot_hs_2014_07.fasta"),
entrez = c("~\\proteoQ\\dbs\\entrez\\uniprot_entrez_hs.rds"),
rptr_intco = 1000,
rm_craps = TRUE,
rm_krts = FALSE,
rm_outliers = FALSE,
annot_kinases = TRUE,
plot_rptr_int = TRUE,
plot_log2FC_cv = TRUE,
)
View(entrez)
View(acc_lookup)
library(proteoQDA)
data(F003590)
dim(F003590)
head(100)
head(F003590)
length(F003590)
data(F003591)
length(F003591)
data(F003593)
length(F003593)
data(F003594)
length(F003594)
data(F003595)
length(F003595)
data(F003597)
length(F003597)
data(F003598)
length(F003598)
data(F003602)
length()
length(F003602)
data(F003603)
length(F003603)
data(F003604)
length(F003604)
data(F003605)
length()
length(F003605)
data(F003606)
length(F003606)
data(msms_bi_1)
dim(msms_bi_1)
data(msms_bi_2)
nrow(msms_bi_2)
data(msms_jhu_1)
nrow(msms_jhu_1)
data(msms_jhu_2)
nrow(msms_jhu_2)
data(msms_pnnl_1)
nrow(msms_pnnl_1)
data(msms_pnnl_2)
nrow(msms_pnnl_2)
data(msms_bi_p1)
nrow(msms_bi_p1)
data(msms_bi_p2)
nrow(msms_bi_p2)
data(msms_jhu_p1)
nrow(msms_jhu_p1)
data(msms_jhu_p2)
nrow(msms_jhu_p2)
data(msms_pnnl_p1)
nrow(msms_pnnl_p1)
data(msms_pnnl_p2)
nrow(msms_pnnl_p2)
data(PSMexport_bi_1)
nrow(PSMexport_bi_1)
data(PSMexport_bi_2)
nrow(PSMexport_bi_2)
data(PSMexport_jhu_1)
nrow(PSMexport_jhu_1)
data(PSMexport_jhu_2)
nrow(PSMexport_jhu_2)
data(PSMexport_pnnl_1)
nrow(PSMexport_pnnl_1)
data(PSMexport_pnnl_2)
nrow(PSMexport_pnnl_2)
data(PSMexport_bi_p1)
nrow(PSMexport_bi_p1)
data(PSMexport_bi_p2)
nrow(PSMexport_bi_p2)
data(PSMexport_jhu_p1)
nrow(PSMexport_jhu_p1)
data(PSMexport_jhu_p2)
nrow(PSMexport_jhu_p2)
data(PSMexport_pnnl_p1)
nrow(PSMexport_pnnl_p1)
data(PSMexport_pnnl_p2)
nrow(PSMexport_pnnl_p2)
setwd("C:\\Results\\R\\proteoQDA")
library(devtools)
document()
document()
devtools::document("C:\\Results\\R\\proteoQDA")
dat_dir <- "C:\\Results\\R\\proteoQDA\\data"
filelist <- c("PSMexport_bi_1", "PSMexport_bi_2", "PSMexport_jhu_1", "PSMexport_jhu_2", "PSMexport_pnnl_1", "PSMexport_pnnl_2")
purrr::walk(filelist, ~ {
load(file = file.path(dat_dir, paste0(.x, ".rda")))
save(list = .x, file = file.path(dat_dir, paste0(.x, ".rda")), compress = "xz")
})
filelist <- c("PSMexport_bi_p1", "PSMexport_bi_p2", "PSMexport_jhu_p1", "PSMexport_jhu_p2", "PSMexport_pnnl_p1", "PSMexport_pnnl_p2")
purrr::walk(filelist, ~ {
load(file = file.path(dat_dir, paste0(.x, ".rda")))
save(list = .x, file = file.path(dat_dir, paste0(.x, ".rda")), compress = "xz")
})
document()
check()
library(magrittr)
proteoQDA::set_names()
?proteoQDA::set_names()
?proteoQDA::set_names
document()
warnings()
check()
install()
